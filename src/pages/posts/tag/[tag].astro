---
import type { BlogPostFrontmatter } from "@types";
export async function getStaticPaths() {
    const posts=await Astro.glob<BlogPostFrontmatter>('../*.md');
    let tags:string[]=[];
    posts.forEach(post => {
        if(post.frontmatter.tags){
            tags.push(...post.frontmatter.tags)
        }
    });
    return tags.map(tag=>({
        params: {
            tag:tag.toLocaleLowerCase()
        }
    }))
    
}
    
import Base from "../../../layouts/Base.astro";
import PostsList from "../../../components/PostsList.astro";
const {tag}=Astro.params;
let posts = await Astro.glob<BlogPostFrontmatter>('../*.md');
posts= posts.filter(post=> {
    let shouldShow= false;
    post.frontmatter.tags?.forEach(postTag =>{
        if(postTag.toLocaleLowerCase()===tag){
            shouldShow=true;
        }
    })
    return shouldShow;
})

---
<Base title={`${tag} Blog Posts`}>
    <h1 class="head">Samarth Meditech Blog</h1>
    <p>Showing Blog posts for the <strong>{tag}</strong> tag </p>
    <PostsList posts={posts}/>
</Base>
<style>
    .head{
        font-size: 4vw;
        font-family: var(--poppins);
        text-align: center;
    }
</style>